# 文档脚本

## 背景

该脚本用于简化文档工作中一些机械化的操作，检查文档中可能存在的问题。

用的是Python，上手简单，方便修改。

![](https://free2.yunpng.top/2024/10/08/6704d4ad6fb37.png)

## 目录结构

目录结构混乱，尚未整理。

## 配置文件

目前是在一个py文件里写了两个class作为配置信息，py文件，PrivateConfig类中存放的是私有配置信息，每个人的配置不同，PublicConfig类中存放的是公共配置信息，通常每个人的配置都相同。

## 功能

### 检查文档中的无效引用链接

**作用**：文档的上级文件夹或文档名称发生变化后，会导致其他文档引用该文档的链接失效，例如原链接为`../../页面IDE.md`，但这篇文档已经重命名为了`页面IDE介绍.md`，链接就会失效，要找出这些无效的引用链接。

**入口**：checkRelativePathMarkdown.py文件，默认执行该功能。

### 检查文档中的无效图片

**作用**：人工编辑文档中可能出现失误，导致文档中有无效的图片链接，例如某文档中有图片链接`../../assets/database.png`，但实际上这张图片根本不存在，需要找出这类情况。

**入口**：checkRelativePathMarkdown.py文件，默认执行该功能。

### 检查失效的文档路径映射

**作用**：平台IDE内外有一些链接，是在一个管理页面动态配置的，有时候文档中心的文档路径发生变化（调整文件夹结构或文件名），会导致平台配置的跳转链接失效，为了避免一个个点击验证，用这个脚本匹配失效的映射链接。

**入口**：checkRelativePathMarkdown.py文件，默认执行该功能。

### 合并所有文档文件

**作用**：将所有文档合并成一个markdown，用于生成PDF。

**入口**：checkRelativePathMarkdown.py文件，输入2执行该功能。

### 强制修改所有文档

**作用**：修改所有文档的内容，使文档中心强制覆盖更新掉所有文档，一般用于上传文档后发现图片没上传的情况，不修改掉没图片的那篇文档的话，即使再上传图片也不会使文档内容发生改变，必须让文档中心**识别到文档内容有变动**它才会更新这篇。该脚本不对文档仓库使用，对准备上传的文档使用。

**入口**：checkRelativePathMarkdown.py文件，输入3执行该功能。

### 为所有文档添加样式

**作用**：文档中用到的css，不再单独写到文档中，对要上传的文档文件夹用这个脚本，批量在文末加上css。该脚本不对文档仓库使用，对准备上传的文档使用。

**入口**：checkRelativePathMarkdown.py文件，输入4执行该功能。

### 导出文档中的有效引用图片

**作用**：某些情况下需要将文档打包，而文档的assets文件夹下包含了大量无用的图片，造成打包的体积过大，该脚本用于导出仅文档中用到过的图片。

**入口**：checkRelativePathMarkdown.py文件，输入1执行该功能。

### 导出文档更新的增量图片

**作用**：在文档中心后台上传时，需要上传全量图片包或增量图片包，一般都是用增量图片包，该脚本用于导出某段时间内文档仓库里新增的图片。

**入口**：outputAssetsFiles.py文件

### 下载泡泡markdown中的图片

**作用**：将popo文档转换成本地的markdown文件要做许多手工操作，为了简化这一过程，可以在编辑在线文档时用泡泡的在线markdown，然后复制在线markdown的内容到本地，运行脚本即可得到转换好的本地markdown文件，包含文档中的图片。

**入口**：markdownToLocal.py文件

### 搜索前30名最久未更新的文档

**作用**：用于查找仓库中最后提交日期比较落后的文档，取最久的30篇。

**入口**：checkRelativePathMarkdown.py文件，输入5执行该功能。

